文|码术张

UT(Unit Test)，单元测试，是method级别的测试。

UT的价值，主要有3点。

######1. 尽早地发现软件错误
想象一下，两个bug，
一个在UT阶段发现，
一个在系统测试阶段被发现，
付出的代价，两者相比，谁大？

当然是后者付出的代价更大。
首先，发现的成本大。
投入了不同阶段的测试人员，最后在系统测试阶段被发现。

其次，修改的成本大。
在系统测试阶段，发现一个问题，解决时间会比较长。
比如发现某状态不正确。
首先将问题给A模块。
A模块开发人员分析后，填写分析报告如下：
A模块工作正常，因为B模块没有发消息，导致A模块不设置状态。
于是将问题丢给B。
B模块的分析结果是，B模块只是转发消息，深层原因是，C模块没发相关消息。
于是将问题转给C模块。
C模块分析后，最终解决问题。
如果A、B模块开发人员所在时区，相差8个小时，那么，A转给B，B要第二天才能看到。
B与C相差8个小时，B将在第三天看到问题。
这个问题的解决，最快需要三天。
若C模块开发人员，当初写了相应UT，且在UT阶段发现这一问题，可能只需要几个小时。
总之，问题暴露得越早，花费成本越小。

######2. 方便维护

首先，增加了代码可读性。
UT，是method使用说明书。
有哪些功能，在什么条件下使用，期望的结果是什么，历历在目。
代码越易懂，越易于维护。

其次，降低了修改带来的隐患。
修改代码，有没有破坏原有功能？通过UT可得到即时反馈。
如果UT出现不期望的失败，就需要审查自己的修改。

######3. 提高代码质量

代码越易测试，质量越高。

如果一段代码，难以写UT进行测试，则需要对代码进行修改。

比如这样一段代码
```
Class Creator() {
  private String password;
  ...
  public isCorrectPassword() {
      //check password's validity
  }
}
```

在写单元测试时，发现isCorrectPassword不好测试。如果修改成

```     
public isCorrectPassword(String password) {
  //check password's validity
}
```
就容易测试了。

以上三点，就是UT存在的意义。
>工欲善其事,必先利其器

那么，如何运用这一工具呢？
接下来，基于JUnit4.12，由易到难，一一呈现。
让我们开始愉快的探索之旅吧！
